const APAC_DEFAULT_VALUES={COUNTRY_CODE:"PH",LANGUAGE:"en_US",MINIMIZED_TEXT:"Chat",PAGE_TYPE:"Other"},BRAZIL_DEFAULT_VALUES={COUNTRY_CODE:"BR",LANGUAGE:"pt_BR",MINIMIZED_TEXT:"Chat",PAGE_TYPE:"Other"},UNITED_STATES_DEFAULT_VALUES={COUNTRY_CODE:"US",LANGUAGE:"en_US",MINIMIZED_TEXT:"Chat",PAGE_TYPE:"Other"},INDIA_DEFAULT_VALUES={COUNTRY_CODE:"IN",LANGUAGE:"en_IN",MINIMIZED_TEXT:"Chat",PAGE_TYPE:"Other"},EMEA_ENGLISH_DEFAULT_VALUES={COUNTRY_CODE:"GB",LANGUAGE:"en_GB",MINIMIZED_TEXT:"Chat",PAGE_TYPE:"Other"},EMEA_Dutch_DEFAULT_VALUES={COUNTRY_CODE:"NL",LANGUAGE:"nl_NL",MINIMIZED_TEXT:"Chat",PAGE_TYPE:"Other"},EMEA_GERMAN_DEFAULT_VALUES={COUNTRY_CODE:"DE",LANGUAGE:"de",MINIMIZED_TEXT:"Chat",PAGE_TYPE:"Other"},EMEA_FRENCH_DEFAULT_VALUES={COUNTRY_CODE:"FR",LANGUAGE:"fr",MINIMIZED_TEXT:"Chat",LOADING_TEXT:"Chargement",PAGE_TYPE:"Other"},JAPAN_DEFAULT_VALUES={COUNTRY_CODE:"JP",LANGUAGE:"ja",MINIMIZED_TEXT:"Chat",PAGE_TYPE:"Other"},BOT_VARIANT_TO_DEFAULT_VALUES={APAC:APAC_DEFAULT_VALUES,BRAZIL:BRAZIL_DEFAULT_VALUES,"EMEA Dutch":EMEA_Dutch_DEFAULT_VALUES,"EMEA English":EMEA_ENGLISH_DEFAULT_VALUES,"EMEA French":EMEA_FRENCH_DEFAULT_VALUES,"EMEA German":EMEA_GERMAN_DEFAULT_VALUES,INDIA:INDIA_DEFAULT_VALUES,JAPAN:JAPAN_DEFAULT_VALUES,"UNITED STATES":UNITED_STATES_DEFAULT_VALUES},DEFAULT_VALUES=BOT_VARIANT_TO_DEFAULT_VALUES[window.chatBotGeneralConfig.BOT_VARIANT]||{},BOT_ALREADY_INITIALIZED_KEY="BotAlreadyInitialized",BLOCK_BOX_CLASS="bot-chat-input-blocker__block-box",setCookie=(t,e)=>{document.cookie=`${t}=${e}`},deleteCookie=t=>{setCookie(t,"")},getCookie=t=>{const e=document.cookie.split(";").find((e=>e.trim().startsWith(`${t}=`)));return e&&e.split("=")[1]},botAlreadyInitialized=()=>!!getCookie("BotAlreadyInitialized"),chatStartButtonElement=document.createElement("button");chatStartButtonElement.onclick=()=>{embedded_svc.bootstrapEmbeddedService(),setStartChatButtonLoadingState()},chatStartButtonElement.className="chat-start-btn chat-start-btn--hidden",chatStartButtonElement.innerHTML=`\n    <img\n        class="chat-start-btn__icon" \n        src="https://harmaninternational.secure.force.com/jblbot/resource/jblbot/img/botavatar100.png"\n    />\n    <span class="chat-start-btn__label">${DEFAULT_VALUES.MINIMIZED_TEXT}</span>\n    <div class="chat-loading-indicator">\n        <span class="chat-loading-indicator__ball"></span>\n        <span class="chat-loading-indicator__ball"></span>\n        <span class="chat-loading-indicator__ball"></span>\n    </div>\n`,document.querySelector("body").appendChild(chatStartButtonElement);const setCustomStartButtonVisibilityByStandardBtnStyle=t=>{"none"!==t.style.display?showStartChatButton():hideStartChatButton()},setStartChatButtonLoadingState=()=>chatStartButtonElement.classList.add("loading"),resetStartChatButtonLoadingState=()=>chatStartButtonElement.classList.remove("loading"),showStartChatButton=()=>chatStartButtonElement.classList.remove("chat-start-btn--hidden"),hideStartChatButton=()=>{chatStartButtonElement.classList.add("chat-start-btn--hidden"),chatStartButtonElement.classList.remove("loading")},STD_START_BTN_PRESENCE_CHECK_INTERVAL=200,scheduleStandardStartBtnVisibilityImitation=()=>{const t=document.querySelector(".embeddedServiceHelpButton");t?setStandardStartButtonVisibilityImitating(t):setTimeout(scheduleStandardStartBtnVisibilityImitation,200)},setStandardStartButtonVisibilityImitating=t=>{setCustomStartButtonVisibilityByStandardBtnStyle(t);new MutationObserver(((e,n)=>{for(const n of e)"attributes"===n.type&&"style"===n.attributeName&&setCustomStartButtonVisibilityByStandardBtnStyle(t)})).observe(t,{attributes:!0,childList:!1,subtree:!1})};let chasitorInputWrapperElement;scheduleStandardStartBtnVisibilityImitation();const chatInputBlockElement=document.createElement("div");chatInputBlockElement.className="bot-chat-input-blocker";const blockBox=document.createElement("div");chatInputBlockElement.appendChild(blockBox);const blockChatInput=(t,e)=>{blockBox.className=`${BLOCK_BOX_CLASS} ${BLOCK_BOX_CLASS}--${e}`;const n=document.querySelector(".chasitorInputWrapper");n&&(chasitorInputWrapperElement=n),chasitorInputWrapperElement?.parentNode&&(blockBox.innerText=t,chasitorInputWrapperElement.replaceWith(chatInputBlockElement))},unblockChatInput=()=>{chatInputBlockElement&&chatInputBlockElement.parentNode&&chatInputBlockElement.replaceWith(chasitorInputWrapperElement)},blockChatInputListener=t=>{blockChatInput(t.detail.message,t.detail.blockerVariant)},unblockChatInputListener=t=>{unblockChatInput()};window.addEventListener("blockchatinput",blockChatInputListener),window.addEventListener("unblockchatinput",unblockChatInputListener),window.addEventListener("chatmessageload",unblockChatInputListener),window.addEventListener("message",(t=>{const e=t.data;e&&"chasitor.sendMessage"===e.type&&embedded_svc.postMessage("chasitor.sendMessage",e.message)}),!1);const initESW=function({countryCode:t=DEFAULT_VALUES.COUNTRY_CODE,gslbBaseURL:e,pageType:n=DEFAULT_VALUES.PAGE_TYPE,userEmail:a,userFirstName:i,userLastName:o}){setCookie("BotAlreadyInitialized","true"),embedded_svc.settings.displayHelpButton=!0,embedded_svc.settings.language=DEFAULT_VALUES.LANGUAGE,embedded_svc.settings.defaultMinimizedText=DEFAULT_VALUES.MINIMIZED_TEXT,DEFAULT_VALUES.LOADING_TEXT&&(embedded_svc.settings.loadingText=DEFAULT_VALUES.LOADING_TEXT),embedded_svc.settings.chatbotAvatarImgURL=`${window.chatBotGeneralConfig.BOT_SF_SITE_URL}/resource/jblbot/img/botavatar100.png`,embedded_svc.addEventHandler("afterMinimize",(()=>{window.dispatchEvent(new CustomEvent("chatwindowminimized"))})),embedded_svc.addEventHandler("onChatRequestSuccess",(t=>{window.addEventListener("blockchatinput",blockChatInputListener),window.addEventListener("unblockchatinput",unblockChatInputListener),window.addEventListener("chatmessageload",unblockChatInputListener)})),embedded_svc.addEventHandler("onChatEndedByChasitor",(function(t){window.removeEventListener("blockchatinput",blockChatInputListener),window.removeEventListener("unblockchatinput",unblockChatInputListener),window.removeEventListener("chatmessageload",unblockChatInputListener),unblockChatInput()})),embedded_svc.addEventHandler("onChatEndedByAgent",(function(t){window.removeEventListener("blockchatinput",blockChatInputListener),window.removeEventListener("unblockchatinput",unblockChatInputListener),window.removeEventListener("chatmessageload",unblockChatInputListener),unblockChatInput()})),embedded_svc.settings.extraPrechatFormDetails=[{label:"First Name",value:i,transcriptFields:["Bot_First_Name__c"]},{label:"Last Name",value:o,transcriptFields:["Bot_Last_Name__c"]},{label:"Email",value:a,transcriptFields:["Bot_Email__c"]},{label:"Country Code",value:t,transcriptFields:["Bot_Country_Code__c"]},{label:"Page Type",value:n,transcriptFields:["Bot_Starting_Page_Type__c"]}],embedded_svc.settings.enabledFeatures=["LiveAgent"],embedded_svc.settings.entryFeature="LiveAgent",embedded_svc.init(window.chatBotGeneralConfig.SF_ORG_URL,window.chatBotGeneralConfig.BOT_SF_SITE_URL,e,window.chatBotGeneralConfig.SF_ORG_ID,window.chatBotGeneralConfig.EMBEDDED_DEPLOYMENT_NAME,{baseLiveAgentContentURL:window.chatBotGeneralConfig.BASE_LIVE_AGENT_CONTENT_URL,deploymentId:window.chatBotGeneralConfig.CHAT_DEPLOYMENT_ID,buttonId:window.chatBotGeneralConfig.CHAT_BUTTON_ID,baseLiveAgentURL:window.chatBotGeneralConfig.BASE_LIVE_AGENT_URL,eswLiveAgentDevName:window.chatBotGeneralConfig.LIVE_AGENT_QUEUE_NAME,isOfflineSupportEnabled:!0})},INITIALIZE_CHAT_RETRY_TIMEOUT=300;let embeddedServiceScriptLoaded=window.embedded_svc,gslbBaseURL="https://service.force.com",cumulatedChatRetryTimeout=0;if(!embeddedServiceScriptLoaded){const t=document.createElement("script");t.setAttribute("src",`${window.chatBotGeneralConfig.SF_ORG_URL}/embeddedservice/5.0/esw.min.js`),t.onload=function(){embeddedServiceScriptLoaded=!0},gslbBaseURL=null,document.head.appendChild(t)}window.initializeChatBot=(t={})=>{if(!embeddedServiceScriptLoaded)return cumulatedChatRetryTimeout+=300,void setTimeout((()=>{window.initializeChatBot(t)}),300);let e=getCookie("BotAlreadyInitialized")?0:t.displayChatDelay-cumulatedChatRetryTimeout;e<0&&(e=0),setTimeout((()=>{initESW({...t,gslbBaseURL:gslbBaseURL})}),e)};